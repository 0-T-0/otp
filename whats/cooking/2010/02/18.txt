To: erlang patches <erlang-patches@erlang.org>
Subject: What's cooking in erlang/otp (2010-02-18)
X-dev-at: 64d4c5a1a59b00596dd196b1c204825828c246b9

This is the final What's cooking before the R13B04 release.

I have updated the Stalled section with some more branches,
and added an "Action expected from" line to each, to make
it clear who is responsible for making the next step to
advance the topic.

I will take this opportunity to thank everyone that have
sent us patches. There are currently in the dev branch
one or more commits from 32 persons from outside the
Erlang/OTP team (a few more patches have been included in
some way or another into the release without being visible
in the history in the git repository). I have not counted,
but I think we have never included so many pathes from
open-source contributors in any previous release.

------------------------------------------------------------
[Graduated]

* bg/erl_bif_types (hipe) (2010-02-13) 4 commits
 + Add types for erts_debug:lock_counters/1 (6d2d8b9)
 + Add types for os:timestamp/0 (3f2a3a5)
 + Add types for erts_debug:dist_ext_to_term/2 (11d4aab)
 + erl_bif_types: add 'http_bin' as a valid packet option (4df5137)

* dgud/emacs-mode (tools) (2010-01-26) 2 commits
 + Added the old style skeletons, and a variable to change. (2cbe853)
 + Move code skeletons to a separate file. Use the updated skeletons from the Erlware Mode. (b4fd161)

* jn/sasl-format_report (sasl) (2010-01-27) 1 commit
 + Added sasl_report:format_report/3 to return a string rather than send an io (109a257)

* kr/odbc-netinet (odbc) (2010-02-10) 1 commit
 + Fix ODBC compilation error on FreeBSD by adding netinet/in.h to #include macros (5c6be09)

* ks/cleanups (asn1, os_mon, parsetools, percept, runtime_tools, sasl, wx) (2010-02-13) 13 commits
 + percept: Clean up as suggested by tidier (a8bf1fe)
 + percept: Modernize types and specs (f2592e6)
 + parsetools: Don't use 'try...of' when 'try' will do (c12397f)
 + parsetools: Use %% for comments at the beginning of a line (152088b)
 + parsetools: Replace lists:keysearch/3 with lists:keyfind/3 (b573c21)
 + parsetools: Modernize types and specs (3117c77)
 + parsetools: Replace TABs with spaces (08e2d74)
 + runtime_tools: Modernize specs (2b451b0)
 + sasl: Eliminate tuple used as fun (c394654)
 + sasl: Add missing modules to app file (b8527e1)
 + asn1: Clean up as suggested by tidier (37b274d)
 + os_mon: Modernize types and specs (c40e8d0)
.
.
.

* ks/hipe (dialyzer, hipe, syntax_tools, typer) (2010-02-16) 8 commits
 + dialyzer: Fix system_limit exception in race analysis (abe48c2)
 + syntax_tools: Add types and specs for most exported functions (8b7dd06)
 + syntax_tools: Support the --enable-native-libs configure option (649d313)
 + syntax_tools: Remove $Id$ annotations (b366554)
 + dialyzer: New version for the R13B04 release (a9c8a24)
 + hipe: Miscellaneous additions (cdd3a82)
 + typer: New version for the R13B04 release (eab3576)
 + Fix a HiPE compiler bug evaluating an expression that throws system_limit (63c1378)

* tj/asn1_macro_prefix (asn1) (2010-02-04) 1 commit
 + Add support for prefixing macro names generated by the compiler (9d247b1)

* va/rb-improvements (sasl) (2009-12-25) 4 commits
 + New rb:filter/2 to filter reports by date (242c70e)
 + New rb:filter/1 function to ease report filtering (e99ec8e)
 + Modify rb:grep/1 to grep reports using the re module (501b923)
 + Fix minor typo in read_report/1 (2356f4e)

------------------------------------------------------------
[New topics]

* bg/compiler-bugs (otp) (2010-02-16) 1 commit
 - bug: inlining a module causes an internal compiler error (f77e8aa)

Reminder for a (low priority) bug to fix after the R13B04 release.

* gl/jinterface-pom (jinterface, otp) (2010-02-15) 2 commits
 - Exclude jinterface build artifact from git (37e9289)
 - Add pom.xml for jinterface build (5405d48)

* mh/ssh_channel-init-no-catch (ssh) (2010-01-25) 1 commit
 - Remove pointless catch from ssh_channel:init/1. (bb7eaa5)

* ra/include-public_key-in-ssh (ssh) (2010-01-20) 1 commit
 - Added public_key among ssh applications. (3a0c2c5)

------------------------------------------------------------
[Stalled]

* at/odbc_osx_fix (odbc) (2009-11-30) 1 commit
 - Workaround broken ODBC implementation on OSX 10.5 (88c71c9)

The patch in itself is good. It solves the problem on Mac OS X
in the only way that seems possible. Unfortunately, our
test cases fail on Linux, and fixing it seems to require a
backward-incompatible change to the API of the odbc module or
ugly workarounds. The reviewer (Jakob Cederlund) will email
the details and suggest and/or implement a solution.

Action expected from: OTP/Jakob Cederlund

* bg/safer-local_to_univ (erts) (2010-02-11) 1 commit
 - erl_time_sup.c: test for error return from mktime() (0f62f0b)

We will not include this branch in R13B04 for two reasons:

  o We are not 100% sure that this change is harmless on all
    platforms in all timezones.
  o We have an idea how the underlying problem can be fixed in
    the calendar module (only) and I plan to try it out after the
    release. We will keep this branch in pu as a reminder.

Action expected from: Björn Gustavsson

* db/tv_nthtail_fix (tv) (2009-12-01) 1 commit
 - Fix for tv which restarts while trying to open a table (abe0759)

I should have put this into the stalled state earlier.

Since our long-term goal is to migrate from gs towards wx,
maintaining the old gs applications has a low priority for
the Erlang/OTP team. Therefore, we will accept patches that
seem sound, but we are unlikely to spend much of our own time
fixing bugs.

The author of this topic branch has found the real reason for
the problem, but uncovered additional issues.

Action expected from: The topic author - to decide whether to
include the topic branch (which is a workaround, but does eliminate
the crash) or to wait for a better fix from himself or someone else
with an interest to advance the topic.

* jp/dependencies_makefile (compiler, erts) (2010-02-14) 3 commits
 - squash! eliminate dialyzer warning (434e2ca)
 - squash! fix snprintf for Windows (bf2708d)
 - Add dependencies Makefile generation to erlc(1) and compile(3) (7cbc437)

Approved in principle by the OTP Technical Board; now awaits a closer
review of the implementation.

Action expected from: Björn Gustavsson (the reviewer)

* kr/gs-browser (gs) (2010-02-10) 1 commit
 - Change lib/gs/src/tool_utils.erl to select multiple browsers other than Netscape (802d159)

This topic branch introduces a new call to the deprecated regexp module.

Action expected from: Topic author or anyone else with an interest to
advance the topic

------------------------------------------------------------
[Cooking]

* bd/mnesia-activity-subscription (mnesia) (2010-02-12) 1 commit
 - Add mnesia activity subscription message (a564dd3)

* bg/temp-hipe-fixes (compiler, hipe, kernel) (2010-01-31) 4 commits
 - Crudely fix return type for the lists:key{search,find,member}/3 (0e3ab3e)
 - seq_trace_SUITE: Don't native-compile (c9fc04b)
 - Disable native code if on_load is used (bd4fe28)
 - andor_SUITE: Don't native-compile (8aadc4c)

This branch contains temporary workarounds to avoid failing test
cases and is never intended to graduate.

* kl/extensibility-implied (asn1) (2010-02-05) 3 commits
 - Updated ticket reference (46d01f9)
 - Add support for EXTENSIBILITY IMPLIED, SET/SEQ OF NamedType (185187c)
 - Updated version number for the next version of ASN1 (6f855f3)

* ks/cleanups-after-r13b04 (debugger, docbuilder, gs, kernel, stdlib) (2010-02-07) 8 commits
 - debugger: Clean up as suggested by tidier (3ee6718)
 - docbuilder: Clean up as suggested by tidier (e9ddf18)
 - gs: Clean up as suggested by tidier (b72b682)
 - Take out type declarations from file.hrl. (bbaee4c)
 - stdlib: Use fun object instead of {M,F} tuple (4e68a89)
 - ets: Cleanup as suggested by tidier (83b3cad)
 - kernel: Add types and specs + cleanup (649066e)
 - kernel: Clean up as suggested by tidier (70439b9)

------------------------------------------------------------
[Dropped]

* kr/sasl-typo-fix (sasl) (2010-02-10) 1 commit
 . sasl: Fix typo (b798e9b)

Duplicate of commit 2356f4e in va/rb-improvements.

