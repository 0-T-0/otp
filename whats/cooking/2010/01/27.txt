To: erlang patches <erlang-patches@erlang.org>
Subject: What's cooking in erlang/otp (2010-01-27)
X-dev-at: fabf2e7b08fedd7e8e8cfcebd0cca059eee92658

We hope to soon have building of documentation working in a
git repository or source directory. We will soon update the
wiki with build instructions.

------------------------------------------------------------
[Graduated]

* kj/epmd_port2resp-trunc-extra-tests (erts) (2010-01-24) 1 commit
 + Test that "extra" is handled according to specs in ALIVE2_REQ and PORT2_RESP (ec181b5)

* rb/stdlib_re_unicode_fixes (erts, stdlib) (2010-01-25) 5 commits
 + Fix lost unicode option in re:compile() (6b83b64)
 + Refactor out repeated block in re module (ff65b85)
 + Fix re:replace/4 to handle unicode charlist Replacement argument (cf7e585)
 + Fix re:replace/4 to handle unicode charlist RE argument (1d2a481)
 + Fix re:replace/4 to handle binary unicode output when nothing replaced (98cb178)

Patrik Nyblom (the implementator/maintainer of the re module) fixed one
of the found bugs in a different way, and corrected another rebport bug
in a separate commit.

* ta/os_timestamp_no_mutex (erts) (2010-01-23) 1 commit
 + Remove mutex lock around sys_gettimeofday() in os:timestamp/0 (ed188cb)

------------------------------------------------------------
[New topics]

* bg/cleanup-tests (eunit, kernel, stdlib) (2010-01-24) 5 commits
 - file_SUITE: eliminate a warning for an unused variable (3deaf78)
 - kernel tests: modernize guard tests (2085a15)
 - unicode_SUITE: replace deprecated concat_binary/1 with list_to_binary/1 (19f0ce0)
 - stdlib tests: modernize guard tests (1001c05)
 - Test suites: fix creation of Emakefiles (3aad381)

* bg/hipe-fixes (compiler, stdlib) (2010-01-25) 3 commits
 - compiler: make ignore_native_errors also handle internal hipe errors (a44b1f9)
 - re tests: disable native-code compilation for huge modules (9f78cfe)
 - Teach the compiler the {native,false} option (af6c948)

* jn/supervisor_child_count_only (stdlib) (2010-01-25) 1 commit
 - Add count_children/1 to supervisor.erl to determine the number of children being managed without the memory impact of which_children/1 (10ef53f)

* ks/bsl_system_limit (hipe) (2010-01-26) 1 commit
 - Fix a HiPE compiler bug evaluating an expression that throws system_limit. (dcada69)

* mp/hipe-smp-fixes (erts, kernel) (2010-01-27) 2 commits
 - work around hipe_mfa_info_table lock omission (24146d3)
 - fix hipe loader SMP non-atomicity error (38cec58)

------------------------------------------------------------
[Stalled]

* jb/atom_table_size_env (erts, otp) (2009-12-21) 1 commit
 - Added ERL_ATOM_TABLE_SIZE environment variable (ca57c14)

The OTP Technical Board approves adding a mechanism for
adjusting the size of the atom table (downwards and upwards),
but the mechanism should be an emulator option (similar to
how other limits such as the minimum heap size can be changed)
rather than a new environment variable. Since any emulator option
can be set in the ERL_FLAGS environment variable, there is
no need to introduce a new environment variable.

* sc/sctp-connect-nowait (kernel) (2009-12-21) 1 commit
 - Implement a non-blocking SCTP connect (ae3d819)

Approved in principle, but the implementation needs some
finish touches as pointed out by Raimo, and also
documentation and test cases.

------------------------------------------------------------
[Cooking]

* at/odbc_osx_fix (odbc) (2009-11-30) 1 commit
 - Workaround broken ODBC implementation on OSX 10.5 (88c71c9)

* cf/epp-macro-overloading (otp, stdlib) (2009-12-10) 4 commits
 - update the documentation on preprocessor in the reference manual (218d912)
 - epp: change rules to choose the right version of a macro (2b3416e)
 - epp: Add support of macros overloading (9966991)
 - epp: fix bug in the function scan_undef (9a63fb0)

Extend the pre-processor to allow overloading of macros with
the same name but different arities.

Approved by the OTP Technical Board. Will probably graduate
before the R13B04 release.

* db/tv_nthtail_fix (tv) (2009-12-01) 1 commit
 - Fix for tv which restarts while trying to open a table (abe0759)

The author of this topic branch has found the real reason for
the problem and has made some progress in resolving it.

* gc/hipe_darwin_amd64 (erts) (2010-01-12) 4 commits
 - Fix hipe memory allocation problems on darwin/amd64. (32ca14f)
 - Porting x86 darwin fixes to amd64 darwin hipe asm/m4 code. (427f1db)
 - Automatically enable hipe for darwin/amd64 builds. (43ae4b7)
 - Allow configure to enable_hipe for darwin/amd64 builds. (733ce7a)

* is/mnesia-send-compressed (mnesia) (2010-01-11) 2 commits
 - Update documentation to describe the new Mnesia option "send_compressed" (583d00b)
 - Add option to compress data when copying tables between Mnesia nodes (86f786e)

* jp/dependencies_makefile (compiler, erts) (2010-01-12) 2 commits
 - squash! fix snprintf for Windows (bf2708d)
 - Add dependencies Makefile generation to erlc(1) and compile(3) (7cbc437)

Approved in principle by the OTP Technical Board; now awaits a closer
review of the implementation.

* pan/enable_m32_build (erts, otp) (2009-12-08) 1 commit
 - Teach configure --enable-m32-build for forcing a 32-bit build (15c7817)

* po/odbc-update-delete-no-rows (odbc) (2009-11-26) 1 commit
 - SQL_NO_DATA and SQLSTATE 00000 indicate success for updates/deletes that affect no rows (1a564f8)

* sf/erl_match-longlong (erl_interface) (2010-01-20) 1 commit
 - erl_interface: Allow erl_match() to match ERL_LONGLONG and ERL_U_LONGLONG terms (938ccfe)

* ta/ensure_dir_eexist (stdlib) (2010-01-23) 2 commits
 - filelib_SUITE: strenghten tests of filelib:ensure_dir/1 (67657ed)
 - Don't return a false {error,eexist} in filelib:ensure_dir/1 (ecd339d)

* va/rb-improvements (sasl) (2009-12-25) 4 commits
 - New function to filter reports by date (5391383)
 - New rb:filter/1 function to ease report filtering (ed28348)
 - Add rb:re/1 to grep reports using the re module (e5bd091)
 - Fix minor typo in read_report/1 (07c6ad4)
